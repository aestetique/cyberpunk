<form class="item-card role-card {{#unless isLocked}}unlocked{{/unless}}" autocomplete="off">
  {{!-- Header (38px) --}}
  <header class="sheet-header">
    <button class="lock-toggle" type="button" title="{{#if isLocked}}Unlock{{else}}Lock{{/if}} Sheet">
      <img src="systems/cyberpunk/img/ui/{{#if isLocked}}lock{{else}}unlock{{/if}}.svg" alt="">
    </button>

    <span class="header-name">{{item.name}}</span>

    <a class="header-control" data-action="copyUuid" title="Copy UUID">
      <i class="fas fa-passport"></i>
    </a>
    <a class="header-control close" data-action="closeSheet" title="Close">
      <i class="fas fa-times"></i>
    </a>
  </header>

  {{!-- Item Content --}}
  <div class="item-content">
    {{!-- Item Trivia (460×80px) --}}
    <div class="item-trivia">
      {{!-- Portrait (80×80px) --}}
      <div class="item-portrait">
        <img src="{{item.img}}" alt="{{item.name}}">
      </div>

      {{!-- Name+Category Container --}}
      <div class="item-identity">
        <input type="text" class="item-name" name="name" value="{{item.name}}" {{#if isLocked}}readonly{{/if}}>
        <div class="item-category">
          <div class="category-icon">
            <img src="systems/cyberpunk/img/ui/badge-role.svg" alt="">
          </div>
          <span class="category-label">Role</span>
        </div>
      </div>
    </div>

    {{!-- Tabs Line --}}
    <div class="tabs-line">
      <a class="tab-header {{#if (eq activeTab 'description')}}active{{/if}}" data-tab="description">
        <span class="tab-text">Description</span>
      </a>
      <a class="tab-header {{#if (eq activeTab 'skills')}}active{{/if}}" data-tab="skills">
        <span class="tab-text">Skills</span>
      </a>
    </div>

    {{!-- Horizontal Divider --}}
    <div class="divider"></div>

    {{!-- Tab Content --}}
    <div class="tab-content">
      {{#if (eq activeTab 'description')}}
        {{!-- Description Tab --}}
        {{!-- Flavour Text --}}
        <div class="flavour-section">
          {{#if isLocked}}
            <p class="flavour-text">{{system.flavor}}</p>
          {{else}}
            <textarea class="flavour-text" name="system.flavor" placeholder="Role description...">{{system.flavor}}</textarea>
          {{/if}}
        </div>

        {{!-- Source Field --}}
        <div class="source-field">
          <label class="variable-label">Source</label>
          <input type="text" class="source-input" name="system.source" value="{{system.source}}" placeholder="Core Rulebook, p.XX" {{#if isLocked}}readonly{{/if}}>
        </div>
      {{else}}
        {{!-- Skills Tab --}}
        {{!-- Special Skill Field --}}
        <div class="special-skill-field">
          <label class="variable-label">Special Skill</label>
          {{#if hasSpecialSkill}}
            <div class="skill-drop filled" data-drop-target="special-skill">
              <span class="skill-name" data-uuid="{{system.specialSkill.uuid}}">{{system.specialSkill.name}}</span>
              {{#unless isLocked}}
                <button type="button" class="remove-special-skill" title="Remove Skill">
                  <img src="systems/cyberpunk/img/ui/icon-trash.svg" alt="Remove">
                </button>
              {{/unless}}
            </div>
          {{else}}
            <div class="skill-drop empty" data-drop-target="special-skill">
              <span class="placeholder">{{#if isLocked}}Unlock and drop a special skill here.{{else}}Drop a special skill here.{{/if}}</span>
            </div>
          {{/if}}
        </div>

        {{!-- Career Skills Frame --}}
        <div class="career-skills-frame {{#unless careerSkillsList.length}}empty{{/unless}}" data-drop-target="career-skill">
          <span class="career-skills-label">Career Skills</span>
          {{#if careerSkillsList.length}}
            <div class="career-skills-grid">
              {{#each careerSkillsList as |skill index|}}
                <div class="career-skill-item">
                  <span class="skill-name" data-uuid="{{skill.uuid}}">{{skill.name}}</span>
                  {{#unless ../isLocked}}
                    <button type="button" class="remove-career-skill" data-index="{{index}}" title="Remove Skill">
                      <img src="systems/cyberpunk/img/ui/icon-trash.svg" alt="Remove">
                    </button>
                  {{/unless}}
                </div>
              {{/each}}
            </div>
          {{else}}
            <span class="placeholder">{{#if isLocked}}Unlock and drop career skills here.{{else}}Drop career skills here.{{/if}}</span>
          {{/if}}
        </div>
      {{/if}}
    </div>
  </div>
</form>
